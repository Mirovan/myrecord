/*------------------ Системные сущности  -----------------------*/

/*Роли системных и всех пользователей*/
CREATE SEQUENCE role_id_seq START WITH 1;

CREATE TABLE "role" (
    id INTEGER NOT NULL default nextval('role_id_seq') PRIMARY KEY,
	role VARCHAR(240) NOT NULL
);
ALTER SEQUENCE role_id_seq owned by "role".id;

INSERT INTO "role" (id, role) VALUES
(1, 'ADMIN'),
(2, 'SYSUSER'),
(3, 'MANAGER'),
(4, 'MASTER'),
(5, 'CLIENT');


/*Пользователи системы*/
CREATE SEQUENCE user_id_seq START WITH 1;

CREATE TABLE "users" (
    id INTEGER NOT NULL default nextval('user_id_seq') PRIMARY KEY,
	email VARCHAR(120) NOT NULL,
	phone VARCHAR(10) NOT NULL,
	pass VARCHAR(255) NOT NULL
);
ALTER SEQUENCE user_id_seq owned by "users".id;

/*дополнительная таблица с данными пользователями
или
таблица с динамическими полями*/


/*Роли пользователя*/
CREATE TABLE "user_role" (
    user_id INTEGER REFERENCES "users"(id),
	role_id INTEGER REFERENCES "role"(id)
);


/*Баланс денег пользователя системы*/
/*
CREATE SEQUENCE sys_balance_id_seq START WITH 1;

CREATE TABLE "sys_balance" (
    id INTEGER NOT NULL default nextval('sys_balance_id_seq'),
);
ALTER SEQUENCE sys_balance_id_seq owned by "sys_balance".id;
*/


/*------------------ Клиентские сущности ----------------------*/

/*Помещения/залы/комнаты/рабочие места*/
CREATE SEQUENCE room_id_seq START WITH 1;

CREATE TABLE "room" (
    id INTEGER NOT NULL default nextval('room_id_seq') PRIMARY KEY,
    user_id INTEGER REFERENCES "users"(id),
	name VARCHAR(240) NOT NULL,
	active BOOLEAN
);
ALTER SEQUENCE room_id_seq owned by "room".id;


/*Услуги*/
CREATE SEQUENCE service_id_seq START WITH 1;

CREATE TABLE "service" (
    id INTEGER NOT NULL default nextval('service_id_seq') PRIMARY KEY,
    user_id INTEGER REFERENCES "users"(id),
	name VARCHAR(240) NOT NULL,
    active BOOLEAN
);
ALTER SEQUENCE service_id_seq owned by "service".id;


/*Услуги в помещении*/
CREATE TABLE "service_room" (
    service_id INTEGER REFERENCES "service"(id),
	room_id INTEGER REFERENCES "room"(id)
);


/*Услуги пользователя - Профиль специалиста*/
CREATE TABLE "user_room" (
    user_id INTEGER REFERENCES "users"(id),
	room_id INTEGER REFERENCES "room"(id)
);
