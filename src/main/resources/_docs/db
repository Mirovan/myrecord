/*------------------ Системные сущности  -----------------------*/

/*Роли системных и всех пользователей*/
CREATE SEQUENCE role_id_seq START WITH 1;

CREATE TABLE "role" (
    id INTEGER NOT NULL default nextval('role_id_seq') PRIMARY KEY,
	role VARCHAR(240) NOT NULL
);
ALTER SEQUENCE role_id_seq owned by "role".id;

INSERT INTO "role" (id, role) VALUES
(1, 'ADMIN'),
(2, 'SYSUSER'),
(3, 'MANAGER'),
(4, 'MASTER'),
(5, 'CLIENT');


/*Пользователи системы*/
CREATE SEQUENCE user_id_seq START WITH 1;

CREATE TABLE "users" (
    id INTEGER NOT NULL default nextval('user_id_seq') PRIMARY KEY,
	email VARCHAR(120) NOT NULL,
	phone VARCHAR(10) NOT NULL,
	pass VARCHAR(255) NOT NULL
);
ALTER SEQUENCE user_id_seq owned by "users".id;

/*
INSERT INTO sys_user (id, email, phone, pass, role_id) VALUES(1, 'admin@myrecord.ru', '1111111111', MD5('000000'), 1);
INSERT INTO sys_user (id, email, phone, pass, role_id) VALUES(2, 'mirovan@narod.ru', '9870670599', MD5('000000'), 1);
*/

/*Роли пользователя*/
CREATE TABLE "user_role" (
    user_id INTEGER REFERENCES "users"(id),
	role_id INTEGER REFERENCES "role"(id)
);


/*Баланс денег пользователя системы*/
/*
CREATE SEQUENCE sys_balance_id_seq START WITH 1;

CREATE TABLE "sys_balance" (
    id INTEGER NOT NULL default nextval('sys_balance_id_seq'),
);
ALTER SEQUENCE sys_balance_id_seq owned by "sys_balance".id;
*/


/*------------------ Клиентские сущности ----------------------*/

/*Роли пользователей*/
/*
CREATE SEQUENCE role_id_seq START WITH 1;

CREATE TABLE "role" (
    id INTEGER NOT NULL default nextval('role_id_seq'),
	role_name VARCHAR(240) NOT NULL
);
ALTER SEQUENCE role_id_seq owned by "role".id;

INSERT INTO role (id, role_name) VALUES
(1, 'admin'),
(2, 'manager'),
(3, 'master'),
(4, 'user');
*/


/*Пользователи*/

/*дополнительная таблица с данными пользователями
или
таблица с динамическими полями*/


/*Услуги*/
CREATE SEQUENCE service_id_seq START WITH 1;

CREATE TABLE "service" (
    id INTEGER NOT NULL default nextval('service_id_seq'),
    id_owner_user INTEGER NOT NULL,
	service_name VARCHAR(240) NOT NULL,
	service_cost INTEGER DEFAULT 0
);
ALTER SEQUENCE service_id_seq owned by "service".id;