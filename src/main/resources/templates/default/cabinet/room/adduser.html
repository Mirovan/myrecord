<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>Spring Security Example </title>
        <link rel="stylesheet" th:href="@{/css/autocomplete.css}"></link>
        <!--<script src="https://code.jquery.com/jquery-1.12.4.js"></script>-->
        <!--<script src="https://code.jquery.com/ui/1.12.4/jquery-ui.js"></script>-->
        <script th:src="@{/js/jquery.min.js}"></script>
        <script th:src="@{/js/jquery.autocomplete.js}"></script>
    </head>
    <body>
        <script th:inline="javascript">
            var array = [];

            /*<![CDATA[*/
            $(document).ready(function() {

                let users = [[${users}]];

        //        console.log('users size = ' + users.length);
        //        console.log(users);

                var usersArray = $.map(users, function (user) { return { value: user.name + ' ' + user.sirname, data: user.id }; });
                console.log(usersArray);
                $('#autocomplete-dynamic').autocomplete({
                    lookup: usersArray,
                    onSelect: function(suggestion) {
        //                $('#selction-dynamic').html('You selected: ' + suggestion.value + ', ' + suggestion.data);
                        $('#selction-dynamic').html(suggestion.data);
                    },
                    // onHint: function (hint) {
                    // $('#autocomplete-dynamic-x').val(hint);
                    // },
                    onInvalidateSelection: function() {
                        $('#selction-dynamic').html('You selected: none');
                    }

                });

                $('#button').click(function() {
                    alert('value = ' +  $("#selction-dynamic").html()); // get the id from the hidden input
                });

            });

            /*]]>*/

        </script>
        <h1>Добавление пользователя в помещение</h1>

        <div>
            <input type="text" name="user" id="autocomplete-dynamic" style="width: 100%; border-width: 5px;"/>
            <div id="selction-dynamic" hidden="true"></div>

            <button id="button" type="submit" >Select user</button>
        </div>

        <br />
        <br />
        <div th:include="cabinet/inc/menu.inc::menu"></div>

    </body>
</html>

